create_giga_grox = {
	create_species = {
		name = "Novian"
		plural = "Novians"
		class = AVI
		portrait = avi15
		homeworld = THIS
		traits = {
			trait = trait_pc_grox_preference
			trait = trait_robust
			trait = trait_psionic
			trait = trait_cybernetic
			trait = trait_sedentary
			trait = trait_perfected_genes
		}
		effect = {
			save_global_event_target_as = giga_grox_species
		}
	}
	create_species = {
		name = "Deltkren"
		plural = "Deltkrens"
		class = HUM
		portrait = humanoid_hp_06
		traits = {
			trait = trait_cybernetic
			trait = trait_syncretic_proles
			trait = trait_robust
			trait = trait_fertile
			trait = trait_very_strong
		}
		effect = {
			save_global_event_target_as = giga_grox_deltkren_species
		}
	}
	create_species = {
		name = "Felikat"
		plural = "Felikatz"
		class = MAM
		portrait = mam14
		traits = {
			trait = trait_sedentary
			trait = trait_docile
			trait = trait_syncretic_proles
		}
		effect = {
			save_global_event_target_as = giga_grox_katz_species
		}
	}
	create_species = {
		class = ART
		name = "Sektian"
		plural = "Sektian"
		portrait = art11
		traits = {
			trait = trait_fertile
			trait = trait_industrious
			trait = trait_syncretic_proles
		}
		effect = {
			save_global_event_target_as = giga_grox_sektians_species
		}
	}
	create_species = {
		class = MAM
		name = "Pangolier"
		plural = "Pangoliers"
		portrait = mam17
		traits = {
			trait = trait_very_strong
			trait = trait_resilient
			trait = trait_docile
			trait = trait_syncretic_proles
		}
		effect = {
			save_global_event_target_as = giga_grox_pangoliers_species
		}
	}
	while = {
		#here they come
		count = 20
		create_pop = {
			species = event_target:giga_grox_species
		}
		clear_deposits = yes
	}
	while = {
		count = 10
		create_pop = {
			species = event_target:giga_grox_deltkren_species
		}
	}
	while = {
		count = 5
		create_pop = {
			species = event_target:giga_grox_pangoliers_species
		}
	}
	while = {
		count = 2
		create_pop = {
			species = event_target:giga_grox_katz_species
		}
	}
	while = {
		count = 38
		create_pop = {
			species = event_target:giga_grox_sektians_species
		}
	}
	while = {
		count = 10

	}
	while = {
		#district stuff
		count = 10
		add_district = {
			district_type = district_grox_city
			ignore_cap = yes
		}
	}
	while = {
		#district stuff
		count = 5
		add_district = {
			district_type = district_grox_forge
			ignore_cap = yes
		}
	}
	while = {
		#district stuff
		count = 5
		add_district = {
			district_type = district_grox_farm
			ignore_cap = yes
		}
	}
	while = {
		#district stuff
		count = 5
		add_district = {
			district_type = district_grox_mining
			ignore_cap = yes
		}
	}
	while = {
		#district stuff
		count = 5
		add_district = {
			district_type = district_grox_energy
			ignore_cap = yes
		}
	}
	create_country = {
		species = event_target:giga_grox_species
		name = "Novian Arikhanate"
		type = giga_grox_country
		authority = auth_imperial
		civics = {
			civic = civic_warrior_culture
			civic = civic_ancient_caches_of_technology
		}
		ethos = {
			ethic = ethic_fanatic_xenophobe
			ethic = ethic_spiritualist
		}
		origin = origin_default
		flag = {
			icon = {
				category = "spherical"
				file = "flag_spherical_8.dds"
			}
			background = {
				category = "backgrounds"
				file = "flag_BG_1.dds"
			}
			colors = {
				"red"
				"cerise_red"
				"null"
				"null"
			}
		}
		effect = {
			set_country_flag = giga_grox_country
			set_graphical_culture = fallen_empire_04
			save_global_event_target_as = giga_grox_country
		}
	}
	set_owner = event_target:giga_grox_country
	set_capital = yes
	add_building = building_giga_grox_capital
	while = {
		count = 1
		add_building = building_grox_city
	}
	while = {
		count = 1
		add_building = building_grox_fort
	}
	while = {
		count = 2
		add_building = building_grox_civilian_forge
	}
	add_building = building_grox_autofab
	if = {
		limit = {
			NOT = {
				has_global_flag = grox_spawned
			}
		}
		system_event = {
			id = giga_grox.1000
		}
	}
}

#populates planets that aren't the grox's capital
grox_major_colony = {
	while = {
		count = 10
		create_pop = {
			species = event_target:giga_grox_species
		}
	}
	while = {
		count = 20
		create_pop = {
			species = event_target:giga_grox_sektians_species
		}
	}
	set_owner = event_target:giga_grox_country
	clear_deposits = yes
	add_building = building_giga_grox_capital
	add_building = building_grox_city
	add_building = building_grox_civilian_forge
	add_building = building_grox_civilian_forge
	add_building = building_grox_autofab
	add_building = building_grox_autofab
	while = {
		#district stuff
		count = 5
		add_district = {
			district_type = district_grox_forge
			ignore_cap = yes
		}
	}
	while = {
		count = 2
		add_district = district_grox_mining
	}
	while = {
		count = 2
		add_district = district_grox_city
	}
}
grox_arikon = {
	add_building = 
}
grox_temple_world = {
	while = {
		count = 40
		create_pop = {
			species = event_target:giga_grox_species
		}
	}
	while = {
		count = 10
		create_pop = {
			species = event_target:giga_grox_sektians_species
		}
	}
	add_building = building_giga_grox_capital
	add_building = building_grox_temple
	add_building = building_grox_temple
	add_building = building_grox_civilian_forge
	add_building = building_grox_autofab
	add_building = building_grox_autofab
	clear_deposits = yes
	while = {
		count = 5
		add_district = district_grox_city
	}
	set_owner = event_target:giga_grox_country
}

create_giga_grox_outpost = {
	create_starbase = {
		#gives them some pretty strong outposts so they arent a pushover
		size = "starbase_citadel"
		module = "gun_battery"
		module = "gun_battery"
		module = "hangar_bay"
		module = "hangar_bay"
		module = "hangar_bay"
		module = "hangar_bay"
		effect = {
			set_owner = event_target:giga_grox_country
		}
	}
}

#####################################
####### GROX RAID FLEET STUFF #######
#####################################
create_grox_raiders = {
	if = {
		limit = {
			mid_game_years_passed < 25
		}
		set_name = "Nov Irki"
		while = {
			count = 15
			create_ship = {
				name = Erkitak
				design = "Erkitak"
				prefix = no
			}
		}
		while = {
			count = 4
			create_ship = {
				name = Arikinovarat
				design = "Arikinovarat"
				prefix = no
			}
		}
		#while = {
		#	count = 1
		#	create_ship = {
		#		name = Akitaliata
		#		design = "Akitaliata"
		#		prefix = no
		#	}
		#}
		break = yes
	}
	else_if = {
		limit = {
			mid_game_years_passed < 50
		}
		while = {
			count = 30
			create_ship = {
				name = Erkitak
				design = "Erkitak"
				prefix = no
			}
		}
		while = {
			count = 12
			create_ship = {
				name = Arikinovarat
				design = "Arikinovarat"
				prefix = no
			}
		}
		while = {
			count = 2
			create_ship = {
				name = Akitaliata
				design = "Akitaliata"
				prefix = no
			}
		}
		break = yes
	}
	else_if = {
		limit = {
			mid_game_years_passed < 75
		}
		while = {
			count = 18
			create_ship = {
				name = random
				design = "NAME_Outrider"
				prefix = no
				#graphical_culture = "pirate_01"
			}
		}
		while = {
			count = 10
			create_ship = {
				name = random
				design = "NAME_Lancer"
				prefix = no
				#graphical_culture = "pirate_01"
			}
		}
		while = {
			count = 3
			create_ship = {
				name = Akitaliata
				design = "Akitaliata"
				prefix = no
				#graphical_culture = "pirate_01"
			}
		}
		break = yes
	}
	else = {
		while = {
			count = 24
			create_ship = {
				name = random
				design = "NAME_Outrider"
				prefix = no
				#graphical_culture = "pirate_01"
			}
		}
		while = {
			count = 14
			create_ship = {
				name = random
				design = "NAME_Lancer"
				prefix = no
				#graphical_culture = "pirate_01"
			}
		}
		while = {
			count = 4
			create_ship = {
				name = Akitaliata
				design = "Akitaliata"
				prefix = no
				#graphical_culture = "pirate_01"
			}
		}
		break = yes
	}
}

create_grox_disco_moon = {
	#GLOWY BOY
	create_fleet = {
		name = "Lumi"
		settings = {
			spawn_debris = no
			can_change_composition = no
			can_disband = no
			can_change_leader = no
			can_upgrade = no
			uses_naval_capacity = no
			garrison = yes
		}
		effect = {
			set_owner = event_target:giga_grox_country
			while = {
				count = 1
				create_ship = {
					name = "Luminatum"
					design = "Disco Planetoid"
					prefix = no
					upgradable = no
				}
				create_ship = {
					name = "Erkitak"
					design = "Erkitak"
					prefix = no
					upgradable = no
				}
				create_ship = {
					name = "Arikinovarat"
					design = "Arikinovarat"
					prefix = no
					upgradable = no
				}
				create_ship = {
					name = "Akitaliata"
					design = "Akitaliata"
					prefix = no
					upgradable = no
				}
			}
			set_location = {
				target = event_target:giga_grox_capital
				distance = 1
				angle = 0
			}
		}
	}
}

increase_grox_progress = {
	if = {
		limit = {
			NOT = {
				has_global_flag = grox_qso_complete
			}
		}
		if = {
			limit = {
				check_variable = {
					which = grox_progress
					value < 100
				}
			}
			change_variable = {
				which = grox_progress
				value = 1
			}
		}
	}
	else = {
		if = {
			limit = {
				check_variable = {
					which = grox_progress
					value >= 100
				}
			}
			set_variable = {
				which = grox_progress
				value = 100
			}
		}
	}
}

